# Nom du Workflow
name: 2-Test - Build 

# Déclenchement manuel
on:
  workflow_dispatch 

env:
  RG_NAME: "RG-AKS-0007"  # Nom du "resource group"
  ACR_NAME: "acraks00001" # Nom de Azure Container Registry
  IMAGE_NAME: "azure-vote-front"  # Nom de l'image Docker

jobs:
  Build:
    runs-on: ubuntu-latest
    steps:

    - run: |
        echo Workflow "Build.yml"

    # Step 1
    #- name: Récupération du repo.
    #  uses:  #Vérifie le dépôt sous $GITHUB_WORKSPACE, afin que les jobs puisse y accéder

    # Step 2
    # Action "Login Azure" # Marketplace 'GitHubAction' https://github.com/marketplace/actions/azure-login


    # Step 3
    # Récupération des clés de l'Azure Container Registry
    #- name: Get Key ACR
    #  run: |
    #    key=`az acr credential show --resource-group ${{ env.RG_NAME }} --name ${{ env.ACR_NAME}} --query passwords[0].value --output tsv`
    #    echo "::set-output name=content::$key"
    #  id: var_acrkey        


    # Step 4
    # Connexion à Azure Container Registry "https://github.com/marketplace/actions/azure-container-registry-login"
    # Pour le password, mettre "${{ steps.var_acrkey.outputs.content }}" 


    # Step 5 Build & Push
    # Pour la version de l'image mettre ${{ github.sha }}
    #- name: Build & Push
    #  run: |
    #    cd Src && docker build . -t ........
    #    docker push .......